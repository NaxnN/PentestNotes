### kerberos login (when ntlm is disabled)
`cme smb hathor.windcorp.htb -k -d windcorp.htb -u <username> -p '<password>' --shares`

## check password policy
```shell
crackmapexec smb <ip_address> --pass-pol 
# Account Lockout Threshold
```

## Enumerate local users
`--users`

## bruteforce 
`smb 10.10.109.132 -u ./credentials/users.txt -p ./credentials/passwords.txt  --continue-on-success`

## spidering shares
```shell
crackmapexec smb 10.10.10.10 -u 'user' -p 'pass' -M spider_plus
cat xxx.json |jq '. | map_values(keys)'

## SMB Download all
smbclient //<IP>/<share>
> mask ""
> recurse ON
> prompt OFF
> mget *
```

## local login
```shell
# use local accounts rather than domain creds
crackmapexec 192.168.215.138 -u 'Administrator' -p 'PASSWORD' --local-auth
```

## --no-bruteforce
```shell
# No spray when using file for username and password    
-u file1 -p file2
user1 pass1
user2 pass2
...
```