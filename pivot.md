## ssh
You need root in both devices (as you are going to create new interfaces) and the sshd config has to allow root login:
PermitRootLogin yes
PermitTunnel yes
```bash
#This will create Tun interfaces in both devices
sudo ssh root@server -w any:any #This will create Tun interfaces in both devices
ip addr add 1.1.1.2/32 peer 1.1.1.1 dev tun0 #Client side VPN IP
ifconfig tun0 up # client and server side
ip addr add 1.1.1.1/32 peer 1.1.1.2 dev tun0 #Server side VPN IP
```

Enable forwarding on the Server side
```bash
echo 1 > /proc/sys/net/ipv4/ip_forward
iptables -t nat -A POSTROUTING -s 1.1.1.2 -o eth0 -j MASQUERADE
```
Set a new route on the client side
```bash
route add -net 10.0.0.0/16 gw 1.1.1.1
```
from https://book.hacktricks.xyz/generic-methodologies-and-resources/tunneling-and-port-forwarding#vpn-tunnel


## meterpreter
```
run autoroute -s target_address
```
```
portfwd add -l local_port -p remote_port -r remote_victim_2
```
